+function(o){"use strict";function e(e){var a=o(this),t=(a.attr("href"),a.dataset());if(a.hasClass("open-popover")){var n;n=t.popover?t.popover:".popover",o.popover(n,a)}a.hasClass("close-popover")&&o.closeModal(".popover.modal-in");var d;a.hasClass("open-popup")&&(d=t.popup?t.popup:".popup",o.popup(d)),a.hasClass("close-popup")&&(d=t.popup?t.popup:".popup.modal-in",o.closeModal(d)),a.hasClass("modal-overlay")&&(o(".modal.modal-in").length>0&&l.modalCloseByOutside&&o.closeModal(".modal.modal-in"),o(".actions-modal.modal-in").length>0&&l.actionsCloseByOutside&&o.closeModal(".actions-modal.modal-in"),o(".popover.modal-in").length>0&&o.closeModal(".popover.modal-in")),a.hasClass("popup-overlay")&&o(".popup.modal-in").length>0&&l.popupCloseByOutside&&o.closeModal(".popup.modal-in")}var a=document.createElement("div");o.modalStack=[];var t=o.Template7;o.modalStackClearQueue=function(){o.modalStack.length&&o.modalStack.shift()()},o.modal=function(e){e=e||{};var n="";if(l.modalTemplate)o._compiledTemplates.modal||(o._compiledTemplates.modal=t.compile(l.modalTemplate)),n=o._compiledTemplates.modal(e);else{var d="";if(e.buttons&&e.buttons.length>0)for(var i=0;i<e.buttons.length;i++)d+='<span class="modal-button'+(e.buttons[i].bold?" modal-button-bold":"")+'">'+e.buttons[i].text+"</span>";var s=e.title?'<div class="modal-title">'+e.title+"</div>":"",r=e.text?'<div class="modal-text">'+e.text+"</div>":"",p=e.afterText?e.afterText:"",c=e.buttons&&0!==e.buttons.length?"":"modal-no-buttons",m=e.verticalButtons?"modal-buttons-vertical":"";n='<div class="modal '+c+'"><div class="modal-inner">'+(s+r+p)+'</div><div class="modal-buttons '+m+'">'+d+"</div></div>"}a.innerHTML=n;var u=o(a).children();return o(l.modalContainer).append(u[0]),u.find(".modal-button").each(function(a,t){o(t).on("click",function(t){e.buttons[a].close!==!1&&o.closeModal(u),e.buttons[a].onClick&&e.buttons[a].onClick(u,t),e.onClick&&e.onClick(u,a)})}),o.openModal(u),u[0]},o.alert=function(e,a,t){return"function"==typeof a&&(t=arguments[1],a=void 0),o.modal({text:e||"",title:"undefined"==typeof a?l.modalTitle:a,buttons:[{text:l.modalButtonOk,bold:!0,onClick:t}]})},o.confirm=function(e,a,t,n){return"function"==typeof a&&(n=arguments[2],t=arguments[1],a=void 0),o.modal({text:e||"",title:"undefined"==typeof a?l.modalTitle:a,buttons:[{text:l.modalButtonCancel,onClick:n},{text:l.modalButtonOk,bold:!0,onClick:t}]})},o.prompt=function(e,a,t,n){return"function"==typeof a&&(n=arguments[2],t=arguments[1],a=void 0),o.modal({text:e||"",title:"undefined"==typeof a?l.modalTitle:a,afterText:'<input type="text" class="modal-text-input">',buttons:[{text:l.modalButtonCancel},{text:l.modalButtonOk,bold:!0}],onClick:function(e,a){0===a&&n&&n(o(e).find(".modal-text-input").val()),1===a&&t&&t(o(e).find(".modal-text-input").val())}})},o.modalLogin=function(e,a,t,n){return"function"==typeof a&&(n=arguments[2],t=arguments[1],a=void 0),o.modal({text:e||"",title:"undefined"==typeof a?l.modalTitle:a,afterText:'<input type="text" name="modal-username" placeholder="'+l.modalUsernamePlaceholder+'" class="modal-text-input modal-text-input-double"><input type="password" name="modal-password" placeholder="'+l.modalPasswordPlaceholder+'" class="modal-text-input modal-text-input-double">',buttons:[{text:l.modalButtonCancel},{text:l.modalButtonOk,bold:!0}],onClick:function(e,a){var l=o(e).find('.modal-text-input[name="modal-username"]').val(),d=o(e).find('.modal-text-input[name="modal-password"]').val();0===a&&n&&n(l,d),1===a&&t&&t(l,d)}})},o.modalPassword=function(e,a,t,n){return"function"==typeof a&&(n=arguments[2],t=arguments[1],a=void 0),o.modal({text:e||"",title:"undefined"==typeof a?l.modalTitle:a,afterText:'<input type="password" name="modal-password" placeholder="'+l.modalPasswordPlaceholder+'" class="modal-text-input">',buttons:[{text:l.modalButtonCancel},{text:l.modalButtonOk,bold:!0}],onClick:function(e,a){var l=o(e).find('.modal-text-input[name="modal-password"]').val();0===a&&n&&n(l),1===a&&t&&t(l)}})},o.showPreloader=function(e){return o.modal({title:e||l.modalPreloaderTitle,text:'<div class="preloader"></div>'})},o.hidePreloader=function(){o.closeModal(".modal.modal-in")},o.showIndicator=function(){o(l.modalContainer).append('<div class="preloader-indicator-overlay"></div><div class="preloader-indicator-modal"><span class="preloader preloader-white"></span></div>')},o.hideIndicator=function(){o(".preloader-indicator-overlay, .preloader-indicator-modal").remove()},o.actions=function(e,n){var d,i,s,r=!1;1===arguments.length?n=e:o.device.ios?o.device.ipad&&(r=!0):o(window).width()>=768&&(r=!0),n=n||[],n.length>0&&!o.isArray(n[0])&&(n=[n]);var p;if(r){var c=l.modalActionsToPopoverTemplate||'<div class="popover actions-popover"><div class="popover-inner">{{#each this}}<div class="list-block"><ul>{{#each this}}{{#if label}}<li class="actions-popover-label {{#if color}}color-{{color}}{{/if}} {{#if bold}}actions-popover-bold{{/if}}">{{text}}</li>{{else}}<li><a href="#" class="item-link list-button {{#if color}}color-{{color}}{{/if}} {{#if bg}}bg-{{bg}}{{/if}} {{#if bold}}actions-popover-bold{{/if}} {{#if disabled}}disabled{{/if}}">{{text}}</a></li>{{/if}}{{/each}}</ul></div>{{/each}}</div></div>';o._compiledTemplates.actionsToPopover||(o._compiledTemplates.actionsToPopover=t.compile(c));var m=o._compiledTemplates.actionsToPopover(n);d=o(o.popover(m,e,!0)),i=".list-block ul",s=".list-button"}else{if(l.modalActionsTemplate)o._compiledTemplates.actions||(o._compiledTemplates.actions=t.compile(l.modalActionsTemplate)),p=o._compiledTemplates.actions(n);else{for(var u="",v=0;v<n.length;v++)for(var f=0;f<n[v].length;f++){0===f&&(u+='<div class="actions-modal-group">');var h=n[v][f],g=h.label?"actions-modal-label":"actions-modal-button";h.bold&&(g+=" actions-modal-button-bold"),h.color&&(g+=" color-"+h.color),h.bg&&(g+=" bg-"+h.bg),h.disabled&&(g+=" disabled"),u+='<span class="'+g+'">'+h.text+"</span>",f===n[v].length-1&&(u+="</div>")}p='<div class="actions-modal">'+u+"</div>"}a.innerHTML=p,d=o(a).children(),o(l.modalContainer).append(d[0]),i=".actions-modal-group",s=".actions-modal-button"}var C=d.find(i);return C.each(function(e,a){var t=e;o(a).children().each(function(e,a){var l,i=e,p=n[t][i];!r&&o(a).is(s)&&(l=o(a)),r&&o(a).find(s).length>0&&(l=o(a).find(s)),l&&l.on("click",function(e){p.close!==!1&&o.closeModal(d),p.onClick&&p.onClick(d,e)})})}),r||o.openModal(d),d[0]},o.popover=function(e,a,t){function n(){e.css({left:"",top:""});var t,l,n=e.width(),d=e.height(),i=e.find(".popover-angle"),s=i.width()/2;i.removeClass("on-left on-right on-top on-bottom").css({left:"",top:""});var r=a.outerWidth(),p=a.outerHeight(),c=a.offset(),m=a.parents(".page");m.length>0&&(c.top=c.top-m[0].scrollTop);var u=o(window).height(),v=o(window).width(),f=0,h=0,g=0,C="top";d+s<c.top?f=c.top-d-s:d+s<u-c.top-p?(C="bottom",f=c.top+p+s):(C="middle",f=p/2+c.top-d/2,g=f,0>f?f=5:f+d>u&&(f=u-d-5),g-=f),"top"===C||"bottom"===C?(h=r/2+c.left-n/2,g=h,5>h&&(h=5),h+n>v&&(h=v-n-5),"top"===C&&i.addClass("on-bottom"),"bottom"===C&&i.addClass("on-top"),g-=h,t=n/2-s+g,t=Math.max(Math.min(t,n-2*s-6),6),i.css({left:t+"px"})):"middle"===C&&(h=c.left-n-s,i.addClass("on-right"),5>h&&(h=c.left+r+s,i.removeClass("on-right").addClass("on-left")),h+n>v&&(h=v-n-5,i.removeClass("on-right").addClass("on-left")),l=d/2-s+g,l=Math.max(Math.min(l,d-2*s-6),6),i.css({top:l+"px"})),e.css({top:f+"px",left:h+"px"})}if("undefined"==typeof t&&(t=!0),"string"==typeof e&&e.indexOf("<")>=0){var d=document.createElement("div");if(d.innerHTML=e.trim(),!(d.childNodes.length>0))return!1;e=d.childNodes[0],t&&e.classList.add("remove-on-close"),o(l.modalContainer).append(e)}return e=o(e),a=o(a),0===e.length||0===a.length?!1:(0===e.find(".popover-angle").length&&e.append('<div class="popover-angle"></div>'),e.show(),n(),o(window).on("resize",n),e.on("close",function(){o(window).off("resize",n)}),e.find("."+l.viewClass).length>0&&o.sizeNavbars(e.find("."+l.viewClass)[0]),o.openModal(e),e[0])},o.popup=function(e,a){if("undefined"==typeof a&&(a=!0),"string"==typeof e&&e.indexOf("<")>=0){var t=document.createElement("div");if(t.innerHTML=e.trim(),!(t.childNodes.length>0))return!1;e=t.childNodes[0],a&&e.classList.add("remove-on-close"),o(l.modalContainer).append(e)}return e=o(e),0===e.length?!1:(e.show(),e.find("."+l.viewClass).length>0&&o.sizeNavbars(e.find("."+l.viewClass)[0]),o.openModal(e),e[0])},o.pickerModal=function(e,a){if("undefined"==typeof a&&(a=!0),"string"==typeof e&&e.indexOf("<")>=0){if(e=o(e),!(e.length>0))return!1;a&&e.addClass("remove-on-close"),o(l.modalContainer).append(e[0])}return e=o(e),0===e.length?!1:(e.show(),o.openModal(e),e[0])},o.loginScreen=function(e){return e||(e=".login-screen"),e=o(e),0===e.length?!1:(e.show(),e.find("."+l.viewClass).length>0&&o.sizeNavbars(e.find("."+l.viewClass)[0]),o.openModal(e),e[0])},o.toast=function(e){var a=o("<div class='modal toast'>"+e+"</div>").appendTo(document.body);o.openModal(a),setTimeout(function(){o.closeModal(a)},2e3)},o.openModal=function(e){l.closePrevious&&o.closeModal(),e=o(e);var a=e.hasClass("modal");if(o(".modal.modal-in:not(.modal-out)").length&&l.modalStack&&a)return void o.modalStack.push(function(){o.openModal(e)});var t=(e.hasClass("popover"),e.hasClass("popup")),n=e.hasClass("login-screen"),d=e.hasClass("picker-modal"),i=e.hasClass("toast");a&&(e.show(),e.css({marginTop:-Math.round(e.outerHeight()/2)+"px"})),i&&e.css({marginLeft:-Math.round(e.outerWidth()/2/1.185)+"px"});var s;n||d||i||(0!==o(".modal-overlay").length||t||o(l.modalContainer).append('<div class="modal-overlay"></div>'),0===o(".popup-overlay").length&&t&&o(l.modalContainer).append('<div class="popup-overlay"></div>'),s=o(t?".popup-overlay":".modal-overlay"));e[0].clientLeft;return e.trigger("open"),d&&o(l.modalContainer).addClass("with-picker-modal"),n||d||i||s.addClass("modal-overlay-visible"),e.removeClass("modal-out").addClass("modal-in").transitionEnd(function(o){e.hasClass("modal-out")?e.trigger("closed"):e.trigger("opened")}),!0},o.closeModal=function(e){if(e=o(e||".modal-in"),"undefined"==typeof e||0!==e.length){var a=e.hasClass("modal"),t=e.hasClass("popover"),n=e.hasClass("popup"),d=e.hasClass("login-screen"),i=e.hasClass("picker-modal"),s=e.hasClass("remove-on-close"),r=o(n?".popup-overlay":".modal-overlay");return n?e.length===o(".popup.modal-in").length&&r.removeClass("modal-overlay-visible"):i||r.removeClass("modal-overlay-visible"),e.trigger("close"),i&&(o(l.modalContainer).removeClass("with-picker-modal"),o(l.modalContainer).addClass("picker-modal-closing")),t?(e.removeClass("modal-in modal-out").trigger("closed").hide(),s&&e.remove()):(e.removeClass("modal-in").addClass("modal-out").transitionEnd(function(a){e.hasClass("modal-out")?e.trigger("closed"):e.trigger("opened"),i&&o(l.modalContainer).removeClass("picker-modal-closing"),n||d||i?(e.removeClass("modal-out").hide(),s&&e.length>0&&e.remove()):e.remove()}),a&&l.modalStack&&o.modalStackClearQueue()),!0}};var l=o.modal.prototype.defaults={modalButtonOk:"OK",modalButtonCancel:"Cancel",modalPreloaderTitle:"Loading...",modalContainer:document.body,closePrevious:!0};o(function(){o(document).on("click"," .modal-overlay, .popup-overlay, .close-popup, .open-popup, .open-popover, .close-popover, .close-picker",e),l.modalContainer=l.modalContainer||document.body})}($);