+function(e){"use strict";var a,n=!1,t=function(t){function r(){var a=!1;return l.params.convertToPopover||l.params.onlyInPopover?(!l.inline&&l.params.input&&(l.params.onlyInPopover?a=!0:e.device.ios?a=e.device.ipad?!0:!1:e(window).width()>=768&&(a=!0)),a):a}function o(){return l.opened&&l.container&&l.container.length>0&&l.container.parents(".popover").length>0?!0:!1}function i(e){e=new Date(e);var a=e.getFullYear(),n=e.getMonth(),t=n+1,r=e.getDate(),o=e.getDay();return l.params.dateFormat.replace(/yyyy/g,a).replace(/yy/g,(a+"").substring(2)).replace(/mm/g,10>t?"0"+t:t).replace(/m/g,t).replace(/MM/g,l.params.monthNames[n]).replace(/M/g,l.params.monthNamesShort[n]).replace(/dd/g,10>r?"0"+r:r).replace(/d/g,r).replace(/DD/g,l.params.dayNames[o]).replace(/D/g,l.params.dayNamesShort[o])}function s(e){if(e.preventDefault(),!l.opened&&(l.open(),l.params.scrollToInput&&!r())){var a=l.input.parents(".page-content");if(0===a.length)return;var n,t=parseInt(a.css("padding-top"),10),o=parseInt(a.css("padding-bottom"),10),i=a[0].offsetHeight-t-l.container.height(),s=a[0].scrollHeight-t-l.container.height(),p=l.input.offset().top-t+l.input[0].offsetHeight;if(p>i){var c=a.scrollTop()+p-i;c+i>s&&(n=c+i-s+o,i===s&&(n=l.container.height()),a.css({"padding-bottom":n+"px"})),a.scrollTop(c,300)}}}function p(a){o()||(l.input&&l.input.length>0?a.target!==l.input[0]&&0===e(a.target).parents(".picker-modal").length&&l.close():0===e(a.target).parents(".picker-modal").length&&l.close())}function c(){l.opened=!1,l.input&&l.input.length>0&&l.input.parents(".page-content").css({"padding-bottom":""}),l.params.onClose&&l.params.onClose(l),l.destroyCalendarEvents()}var l=this;t=t||{};for(var d in a)"undefined"==typeof t[d]&&(t[d]=a[d]);l.params=t,l.initialized=!1,l.inline=l.params.container?!0:!1,l.isH="horizontal"===l.params.direction;var m=l.isH&&n?-1:1;return l.animating=!1,l.addValue=function(e){if(l.params.multiple){l.value||(l.value=[]);for(var a,n=0;n<l.value.length;n++)new Date(e).getTime()===new Date(l.value[n]).getTime()&&(a=n);"undefined"==typeof a?l.value.push(e):l.value.splice(a,1),l.updateValue()}else l.value=[e],l.updateValue()},l.setValue=function(e){l.value=e,l.updateValue()},l.updateValue=function(){l.wrapper.find(".picker-calendar-day-selected").removeClass("picker-calendar-day-selected");var a,n;for(a=0;a<l.value.length;a++){var t=new Date(l.value[a]);l.wrapper.find('.picker-calendar-day[data-date="'+t.getFullYear()+"-"+t.getMonth()+"-"+t.getDate()+'"]').addClass("picker-calendar-day-selected")}if(l.params.onChange&&l.params.onChange(l,l.value,l.value.map(i)),l.input&&l.input.length>0){if(l.params.formatValue)n=l.params.formatValue(l,l.value);else{for(n=[],a=0;a<l.value.length;a++)n.push(i(l.value[a]));n=n.join(", ")}e(l.input).val(n),e(l.input).trigger("change")}},l.initCalendarEvents=function(){function a(a){if(!s&&!i){i=!0;var n=e.getTouchPosition(a);p=h=n.x,c=h=n.y,u=(new Date).getTime(),M=0,D=!0,T=void 0,f=g=l.monthsTranslate}}function t(a){if(i){var n=e.getTouchPosition(a);if(d=n.x,h=n.y,"undefined"==typeof T&&(T=!!(T||Math.abs(h-c)>Math.abs(d-p))),l.isH&&T)return void(i=!1);if(a.preventDefault(),l.animating)return void(i=!1);D=!1,s||(s=!0,k=l.wrapper[0].offsetWidth,y=l.wrapper[0].offsetHeight,l.wrapper.transition(0)),a.preventDefault(),w=l.isH?d-p:h-c,M=w/(l.isH?k:y),g=100*(l.monthsTranslate*m+M),l.wrapper.transform("translate3d("+(l.isH?g:0)+"%, "+(l.isH?0:g)+"%, 0)")}}function r(e){return i&&s?(i=s=!1,v=(new Date).getTime(),300>v-u?Math.abs(w)<10?l.resetMonth():w>=10?n?l.nextMonth():l.prevMonth():n?l.prevMonth():l.nextMonth():-.5>=M?n?l.prevMonth():l.nextMonth():M>=.5?n?l.nextMonth():l.prevMonth():l.resetMonth(),void setTimeout(function(){D=!0},100)):void(i=s=!1)}function o(a){if(D){var n=e(a.target).parents(".picker-calendar-day");if(0===n.length&&e(a.target).hasClass("picker-calendar-day")&&(n=e(a.target)),0!==n.length&&(!n.hasClass("picker-calendar-day-selected")||l.params.multiple)&&!n.hasClass("picker-calendar-day-disabled")){n.hasClass("picker-calendar-day-next")&&l.nextMonth(),n.hasClass("picker-calendar-day-prev")&&l.prevMonth();var t=n.attr("data-year"),r=n.attr("data-month"),o=n.attr("data-day");l.params.onDayClick&&l.params.onDayClick(l,n[0],t,r,o),l.addValue(new Date(t,r,o).getTime()),l.params.closeOnSelect&&l.close()}}}var i,s,p,c,d,h,u,v,f,g,k,y,M,w,T,D=!0;l.container.find(".picker-calendar-prev-month").on("click",l.prevMonth),l.container.find(".picker-calendar-next-month").on("click",l.nextMonth),l.container.find(".picker-calendar-prev-year").on("click",l.prevYear),l.container.find(".picker-calendar-next-year").on("click",l.nextYear),l.wrapper.on("click",o),l.params.touchMove&&(l.wrapper.on(e.touchEvents.start,a),l.wrapper.on(e.touchEvents.move,t),l.wrapper.on(e.touchEvents.end,r)),l.container[0].f7DestroyCalendarEvents=function(){l.container.find(".picker-calendar-prev-month").off("click",l.prevMonth),l.container.find(".picker-calendar-next-month").off("click",l.nextMonth),l.container.find(".picker-calendar-prev-year").off("click",l.prevYear),l.container.find(".picker-calendar-next-year").off("click",l.nextYear),l.wrapper.off("click",o),l.params.touchMove&&(l.wrapper.off(e.touchEvents.start,a),l.wrapper.off(e.touchEvents.move,t),l.wrapper.off(e.touchEvents.end,r))}},l.destroyCalendarEvents=function(e){"f7DestroyCalendarEvents"in l.container[0]&&l.container[0].f7DestroyCalendarEvents()},l.daysInMonth=function(e){var a=new Date(e);return new Date(a.getFullYear(),a.getMonth()+1,0).getDate()},l.monthHTML=function(e,a){e=new Date(e);var n=e.getFullYear(),t=e.getMonth();e.getDate();"next"===a&&(e=11===t?new Date(n+1,0):new Date(n,t+1,1)),"prev"===a&&(e=0===t?new Date(n-1,11):new Date(n,t-1,1)),("next"===a||"prev"===a)&&(t=e.getMonth(),n=e.getFullYear());var r=l.daysInMonth(new Date(e.getFullYear(),e.getMonth()).getTime()-864e6),o=l.daysInMonth(e),i=new Date(e.getFullYear(),e.getMonth()).getDay();0===i&&(i=7);var s,p,c,d=[],m=6,h=7,u="",v=0+(l.params.firstDay-1),f=(new Date).setHours(0,0,0,0),g=l.params.minDate?new Date(l.params.minDate).getTime():null,k=l.params.maxDate?new Date(l.params.maxDate).getTime():null;if(l.value&&l.value.length)for(p=0;p<l.value.length;p++)d.push(new Date(l.value[p]).setHours(0,0,0,0));for(p=1;m>=p;p++){var y="";for(c=1;h>=c;c++){var M=c;v++;var w=v-i,T="";0>w?(w=r+w+1,T+=" picker-calendar-day-prev",s=new Date(0>t-1?n-1:n,0>t-1?11:t-1,w).getTime()):(w+=1,w>o?(w-=o,T+=" picker-calendar-day-next",s=new Date(t+1>11?n+1:n,t+1>11?0:t+1,w).getTime()):s=new Date(n,t,w).getTime()),s===f&&(T+=" picker-calendar-day-today"),d.indexOf(s)>=0&&(T+=" picker-calendar-day-selected"),l.params.weekendDays.indexOf(M-1)>=0&&(T+=" picker-calendar-day-weekend"),(g&&g>s||k&&s>k)&&(T+=" picker-calendar-day-disabled"),s=new Date(s);var D=s.getFullYear(),x=s.getMonth();y+='<div data-year="'+D+'" data-month="'+x+'" data-day="'+w+'" class="picker-calendar-day'+T+'" data-date="'+(D+"-"+x+"-"+w)+'"><span>'+w+"</span></div>"}u+='<div class="picker-calendar-row">'+y+"</div>"}return u='<div class="picker-calendar-month" data-year="'+n+'" data-month="'+t+'">'+u+"</div>"},l.animating=!1,l.updateCurrentMonthYear=function(e){"undefined"==typeof e?(l.currentMonth=parseInt(l.months.eq(1).attr("data-month"),10),l.currentYear=parseInt(l.months.eq(1).attr("data-year"),10)):(l.currentMonth=parseInt(l.months.eq("next"===e?l.months.length-1:0).attr("data-month"),10),l.currentYear=parseInt(l.months.eq("next"===e?l.months.length-1:0).attr("data-year"),10)),l.container.find(".current-month-value").text(l.params.monthNames[l.currentMonth]),l.container.find(".current-year-value").text(l.currentYear)},l.onMonthChangeStart=function(e){l.updateCurrentMonthYear(e),l.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");var a="next"===e?l.months.length-1:0;l.months.eq(a).addClass("picker-calendar-month-current"),l.months.eq("next"===e?a-1:a+1).addClass("next"===e?"picker-calendar-month-prev":"picker-calendar-month-next"),l.params.onMonthYearChangeStart&&l.params.onMonthYearChangeStart(l,l.currentYear,l.currentMonth)},l.onMonthChangeEnd=function(e,a){l.animating=!1;var n,t,r;l.wrapper.find(".picker-calendar-month:not(.picker-calendar-month-prev):not(.picker-calendar-month-current):not(.picker-calendar-month-next)").remove(),"undefined"==typeof e&&(e="next",a=!0),a?(l.wrapper.find(".picker-calendar-month-next, .picker-calendar-month-prev").remove(),t=l.monthHTML(new Date(l.currentYear,l.currentMonth),"prev"),n=l.monthHTML(new Date(l.currentYear,l.currentMonth),"next")):r=l.monthHTML(new Date(l.currentYear,l.currentMonth),e),("next"===e||a)&&l.wrapper.append(r||n),("prev"===e||a)&&l.wrapper.prepend(r||t),l.months=l.wrapper.find(".picker-calendar-month"),l.setMonthsTranslate(l.monthsTranslate),l.params.onMonthAdd&&l.params.onMonthAdd(l,"next"===e?l.months.eq(l.months.length-1)[0]:l.months.eq(0)[0]),l.params.onMonthYearChangeEnd&&l.params.onMonthYearChangeEnd(l,l.currentYear,l.currentMonth)},l.setMonthsTranslate=function(e){e=e||l.monthsTranslate||0,"undefined"==typeof l.monthsTranslate&&(l.monthsTranslate=e),l.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");var a=100*-(e+1)*m,n=100*-e*m,t=100*-(e-1)*m;l.months.eq(0).transform("translate3d("+(l.isH?a:0)+"%, "+(l.isH?0:a)+"%, 0)").addClass("picker-calendar-month-prev"),l.months.eq(1).transform("translate3d("+(l.isH?n:0)+"%, "+(l.isH?0:n)+"%, 0)").addClass("picker-calendar-month-current"),l.months.eq(2).transform("translate3d("+(l.isH?t:0)+"%, "+(l.isH?0:t)+"%, 0)").addClass("picker-calendar-month-next")},l.nextMonth=function(a){("undefined"==typeof a||"object"==typeof a)&&(a="",l.params.animate||(a=0));var n=parseInt(l.months.eq(l.months.length-1).attr("data-month"),10),t=parseInt(l.months.eq(l.months.length-1).attr("data-year"),10),r=new Date(t,n),o=r.getTime(),i=l.animating?!1:!0;if(l.params.maxDate&&o>new Date(l.params.maxDate).getTime())return l.resetMonth();if(l.monthsTranslate--,n===l.currentMonth){var s=100*-l.monthsTranslate*m,p=e(l.monthHTML(o,"next")).transform("translate3d("+(l.isH?s:0)+"%, "+(l.isH?0:s)+"%, 0)").addClass("picker-calendar-month-next");l.wrapper.append(p[0]),l.months=l.wrapper.find(".picker-calendar-month"),l.params.onMonthAdd&&l.params.onMonthAdd(l,l.months.eq(l.months.length-1)[0])}l.animating=!0,l.onMonthChangeStart("next");var c=100*l.monthsTranslate*m;l.wrapper.transition(a).transform("translate3d("+(l.isH?c:0)+"%, "+(l.isH?0:c)+"%, 0)"),i&&l.wrapper.transitionEnd(function(){l.onMonthChangeEnd("next")}),l.params.animate||l.onMonthChangeEnd("next")},l.prevMonth=function(a){("undefined"==typeof a||"object"==typeof a)&&(a="",l.params.animate||(a=0));var n=parseInt(l.months.eq(0).attr("data-month"),10),t=parseInt(l.months.eq(0).attr("data-year"),10),r=new Date(t,n+1,-1),o=r.getTime(),i=l.animating?!1:!0;if(l.params.minDate&&o<new Date(l.params.minDate).getTime())return l.resetMonth();if(l.monthsTranslate++,n===l.currentMonth){var s=100*-l.monthsTranslate*m,p=e(l.monthHTML(o,"prev")).transform("translate3d("+(l.isH?s:0)+"%, "+(l.isH?0:s)+"%, 0)").addClass("picker-calendar-month-prev");l.wrapper.prepend(p[0]),l.months=l.wrapper.find(".picker-calendar-month"),l.params.onMonthAdd&&l.params.onMonthAdd(l,l.months.eq(0)[0])}l.animating=!0,l.onMonthChangeStart("prev");var c=100*l.monthsTranslate*m;l.wrapper.transition(a).transform("translate3d("+(l.isH?c:0)+"%, "+(l.isH?0:c)+"%, 0)"),i&&l.wrapper.transitionEnd(function(){l.onMonthChangeEnd("prev")}),l.params.animate||l.onMonthChangeEnd("prev")},l.resetMonth=function(e){"undefined"==typeof e&&(e="");var a=100*l.monthsTranslate*m;l.wrapper.transition(e).transform("translate3d("+(l.isH?a:0)+"%, "+(l.isH?0:a)+"%, 0)")},l.setYearMonth=function(e,a,n){"undefined"==typeof e&&(e=l.currentYear),"undefined"==typeof a&&(a=l.currentMonth),("undefined"==typeof n||"object"==typeof n)&&(n="",l.params.animate||(n=0));var t;if(t=e<l.currentYear?new Date(e,a+1,-1).getTime():new Date(e,a).getTime(),l.params.maxDate&&t>new Date(l.params.maxDate).getTime())return!1;if(l.params.minDate&&t<new Date(l.params.minDate).getTime())return!1;var r=new Date(l.currentYear,l.currentMonth).getTime(),o=t>r?"next":"prev",i=l.monthHTML(new Date(e,a));l.monthsTranslate=l.monthsTranslate||0;var s,p,c=l.monthsTranslate,d=l.animating?!1:!0;t>r?(l.monthsTranslate--,l.animating||l.months.eq(l.months.length-1).remove(),l.wrapper.append(i),l.months=l.wrapper.find(".picker-calendar-month"),s=100*-(c-1)*m,l.months.eq(l.months.length-1).transform("translate3d("+(l.isH?s:0)+"%, "+(l.isH?0:s)+"%, 0)").addClass("picker-calendar-month-next")):(l.monthsTranslate++,l.animating||l.months.eq(0).remove(),l.wrapper.prepend(i),l.months=l.wrapper.find(".picker-calendar-month"),s=100*-(c+1)*m,l.months.eq(0).transform("translate3d("+(l.isH?s:0)+"%, "+(l.isH?0:s)+"%, 0)").addClass("picker-calendar-month-prev")),l.params.onMonthAdd&&l.params.onMonthAdd(l,"next"===o?l.months.eq(l.months.length-1)[0]:l.months.eq(0)[0]),l.animating=!0,l.onMonthChangeStart(o),p=100*l.monthsTranslate*m,l.wrapper.transition(n).transform("translate3d("+(l.isH?p:0)+"%, "+(l.isH?0:p)+"%, 0)"),d&&l.wrapper.transitionEnd(function(){l.onMonthChangeEnd(o,!0)}),l.params.animate||l.onMonthChangeEnd(o)},l.nextYear=function(){l.setYearMonth(l.currentYear+1)},l.prevYear=function(){l.setYearMonth(l.currentYear-1)},l.layout=function(){var e,a="",n="",t=l.value&&l.value.length?l.value[0]:(new Date).setHours(0,0,0,0),r=l.monthHTML(t,"prev"),o=l.monthHTML(t),i=l.monthHTML(t,"next"),s='<div class="picker-calendar-months"><div class="picker-calendar-months-wrapper">'+(r+o+i)+"</div></div>",p="";if(l.params.weekHeader){for(e=0;7>e;e++){var c=e+l.params.firstDay>6?e-7+l.params.firstDay:e+l.params.firstDay,d=l.params.dayNamesShort[c];p+='<div class="picker-calendar-week-day '+(l.params.weekendDays.indexOf(c)>=0?"picker-calendar-week-day-weekend":"")+'"> '+d+"</div>"}p='<div class="picker-calendar-week-days">'+p+"</div>"}n="picker-modal picker-calendar "+(l.params.cssClass||"");var m=l.params.toolbar?l.params.toolbarTemplate.replace(/{{closeText}}/g,l.params.toolbarCloseText):"";l.params.toolbar&&(m=l.params.toolbarTemplate.replace(/{{closeText}}/g,l.params.toolbarCloseText).replace(/{{monthPicker}}/g,l.params.monthPicker?l.params.monthPickerTemplate:"").replace(/{{yearPicker}}/g,l.params.yearPicker?l.params.yearPickerTemplate:"")),a='<div class="'+n+'">'+m+'<div class="picker-modal-inner">'+p+s+"</div></div>",l.pickerHTML=a},l.params.input&&(l.input=e(l.params.input),l.input.length>0&&(l.params.inputReadOnly&&l.input.prop("readOnly",!0),l.inline||l.input.on("click",s),l.params.inputReadOnly&&l.input.on("focus mousedown",function(e){e.preventDefault()}))),l.inline||e("html").on("click",p),l.opened=!1,l.open=function(){var a=r(),n=!1;l.opened||(l.value||l.params.value&&(l.value=l.params.value,n=!0),l.layout(),a?(l.pickerHTML='<div class="popover popover-picker-calendar"><div class="popover-inner">'+l.pickerHTML+"</div></div>",l.popover=e.popover(l.pickerHTML,l.params.input,!0),l.container=e(l.popover).find(".picker-modal"),e(l.popover).on("close",function(){c()})):l.inline?(l.container=e(l.pickerHTML),l.container.addClass("picker-modal-inline"),e(l.params.container).append(l.container)):(l.container=e(e.pickerModal(l.pickerHTML)),e(l.container).on("close",function(){c()})),l.container[0].f7Calendar=l,l.wrapper=l.container.find(".picker-calendar-months-wrapper"),l.months=l.wrapper.find(".picker-calendar-month"),l.updateCurrentMonthYear(),l.monthsTranslate=0,l.setMonthsTranslate(),l.initCalendarEvents(),n&&l.updateValue()),l.opened=!0,l.initialized=!0,l.params.onMonthAdd&&l.months.each(function(){l.params.onMonthAdd(l,this)}),l.params.onOpen&&l.params.onOpen(l)},l.close=function(){return l.opened&&!l.inline?o()?void e.closeModal(l.popover):void e.closeModal(l.container):void 0},l.destroy=function(){l.close(),l.params.input&&l.input.length>0&&l.input.off("click focus",s),e("html").off("click",p)},l.inline&&l.open(),l};e.fn.calendar=function(a){return this.each(function(){var n=e(this);if(n[0]){var r={};"INPUT"===n[0].tagName.toUpperCase()?r.input=n:r.container=n,new t(e.extend(r,a))}})},a=e.fn.calendar.prototype.defaults={monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],firstDay:1,weekendDays:[0,6],multiple:!1,dateFormat:"yyyy-mm-dd",direction:"horizontal",minDate:null,maxDate:null,touchMove:!0,animate:!0,closeOnSelect:!0,monthPicker:!0,monthPickerTemplate:'<div class="picker-calendar-month-picker"><a href="#" class="link icon-only picker-calendar-prev-month"><i class="icon icon-prev"></i></a><div class="current-month-value"></div><a href="#" class="link icon-only picker-calendar-next-month"><i class="icon icon-next"></i></a></div>',yearPicker:!0,yearPickerTemplate:'<div class="picker-calendar-year-picker"><a href="#" class="link icon-only picker-calendar-prev-year"><i class="icon icon-prev"></i></a><span class="current-year-value"></span><a href="#" class="link icon-only picker-calendar-next-year"><i class="icon icon-next"></i></a></div>',weekHeader:!0,scrollToInput:!0,inputReadOnly:!0,convertToPopover:!0,onlyInPopover:!1,toolbar:!0,toolbarCloseText:"Done",toolbarTemplate:'<div class="toolbar"><div class="toolbar-inner">{{monthPicker}}{{yearPicker}}</div></div>'},e.initCalendar=function(a){var n=e(a?a:document.body);n.find("[data-toggle='date']").each(function(){e(this).calendar()})}}($);