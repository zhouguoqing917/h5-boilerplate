!function(a){function i(){x.loading?a(".wrapper").append('<div class="parallax-loading"><i class="ui-loading ui-loading-white"></i></div>'):y=!1,u=0,p="stay",g=v.length,h=document.documentElement.clientWidth,b=document.documentElement.clientHeight,C=a("[data-animation]");for(var i=0;g>i;i++)a(v[i]).attr("data-id",i+1);k.addClass(x.direction).addClass(x.swipeAnim),v.css({width:h+"px",height:b+"px"}),"horizontal"===x.direction?k.css("width",h*v.length):k.css("height",b*v.length),"cover"===x.swipeAnim&&(k.css({width:h,height:b}),v[0].style.display="block"),x.loading||(a(v[u]).addClass("current"),x.onchange(u,v[u],p),l())}function n(a){return y===!0?(event.preventDefault(),!1):(z=!0,c="horizontal"===x.direction?a.pageX:a.pageY,"default"===x.swipeAnim&&(k.addClass("drag"),m=k.css("-webkit-transform").replace("matrix(","").replace(")","").split(","),m="horizontal"===x.direction?parseInt(m[4]):parseInt(m[5])),"cover"===x.swipeAnim&&x.drag&&v.addClass("drag"),void(f=1))}function t(a){return y===!0||z===!1?(event.preventDefault(),!1):(event.preventDefault(),w="horizontal"===x.direction?a.pageX:a.pageY,d(),x.drag&&!s()&&e(),void(f=2))}function r(i){y===!0||2!==f||(z=!1,w="horizontal"===x.direction?i.pageX:i.pageY,"default"!==x.swipeAnim||s()?"cover"!==x.swipeAnim||s()||(Math.abs(w-c)<=50&&w>=c&&x.drag?(o(u,"keep-backward"),p="stay"):Math.abs(w-c)<=50&&c>w&&x.drag?(o(u,"keep-forward"),p="stay"):Math.abs(w-c)>50&&w>=c&&x.drag?(o(u-1,"backward"),p="backward"):Math.abs(w-c)>50&&c>w&&x.drag?(o(u+1,"forward"),p="forward"):Math.abs(w-c)>50&&w>=c&&!x.drag?(o(u-1,"backward"),p="backward"):Math.abs(w-c)>50&&c>w&&!x.drag&&(o(u+1,"forward"),p="forward")):(k.removeClass("drag"),Math.abs(w-c)<=50?(o(u),p="stay"):w>=c?(o(u-1),p="backward"):c>w&&(o(u+1),p="forward")),x.indicator&&a(a(".parallax-h-indicator ul li, .parallax-v-indicator ul li").removeClass("current").get(u)).addClass("current"),f=3)}function e(){if("default"===x.swipeAnim){var i=m+w-c;"horizontal"===x.direction?k.css("-webkit-transform","matrix(1, 0, 0, 1, "+i+", 0)"):k.css("-webkit-transform","matrix(1, 0, 0, 1, 0, "+i+")")}else if("cover"===x.swipeAnim){var i=w-c,n=a(v[u-1]),t=a(v[u+1]);a(v).css({"z-index":0}),"horizontal"===x.direction&&w>=c?n.css({"z-index":2,display:"block","-webkit-transform":"translateX("+(i-h)+"px)"}):"horizontal"===x.direction&&c>w?t.css({"z-index":2,display:"block","-webkit-transform":"translateX("+(h+i)+"px)"}):"vertical"===x.direction&&w>=c?n.css({"z-index":2,display:"block","-webkit-transform":"translateY("+(i-b)+"px)"}):"vertical"===x.direction&&c>w&&t.css({"z-index":2,display:"block","-webkit-transform":"translateY("+(b+i)+"px)"})}}function o(i,n){if(u=i,"default"===x.swipeAnim){var t=0;t="horizontal"===x.direction?i*-h:i*-b,"horizontal"===x.direction?k.css({"-webkit-transform":"matrix(1, 0, 0, 1, "+t+", 0)"}):k.css({"-webkit-transform":"matrix(1, 0, 0, 1, 0, "+t+")"})}else"cover"===x.swipeAnim&&("keep-backward"===n&&x.drag?(v.removeClass("drag"),"horizontal"===x.direction?a(v[u-1]).css({"-webkit-transform":"translateX(-100%)"}):a(v[u-1]).css({"-webkit-transform":"translateY(-100%)"})):"keep-forward"===n&&x.drag?(v.removeClass("drag"),"horizontal"===x.direction?a(v[u+1]).css({"-webkit-transform":"translateX(100%)"}):a(v[u+1]).css({"-webkit-transform":"translateY(100%)"})):"forward"===n&&x.drag?(v.removeClass("drag"),a(v[u-1]).addClass("back"),v[u].style.webkitTransform="translate(0, 0)"):"backward"===n&&x.drag?(v.removeClass("drag"),a(v[u+1]).addClass("back"),v[u].style.webkitTransform="translate(0, 0)"):"forward"!==n||x.drag?"backward"!==n||x.drag||(k.addClass("animate"),a(v[u+1]).addClass("back"),a(v[u]).addClass("front").show()):(k.addClass("animate"),a(v[u-1]).addClass("back"),a(v[u]).addClass("front").show()));y=!0,setTimeout(function(){y=!1},300)}function d(){"horizontal"===x.direction?w>=c?k.removeClass("forward").addClass("backward"):c>w&&k.removeClass("backward").addClass("forward"):w>=c?k.removeClass("forward").addClass("backward"):c>w&&k.removeClass("backward").addClass("forward")}function s(){if("horizontal"===x.direction){if(w>=c&&0===u||c>=w&&u===g-1)return!0}else if(w>=c&&0===u||c>=w&&u===g-1)return!0;return!1}function l(){C.css({"-webkit-animation":"none",display:"none"}),a(".current [data-animation]").each(function(i,n){var t=a(n),r=t.attr("data-animation"),e=t.attr("data-duration")||500,o=t.attr("data-timing-function")||"ease",d=t.attr("data-delay")?t.attr("data-delay"):0;"followSlide"===r&&("horizontal"===x.direction&&"forward"===p?r="followSlideToLeft":"horizontal"===x.direction&&"backward"===p?r="followSlideToRight":"vertical"===x.direction&&"forward"===p?r="followSlideToTop":"vertical"===x.direction&&"backward"===p&&(r="followSlideToBottom")),t.css({display:"block","-webkit-animation-name":r,"-webkit-animation-duration":e+"ms","-webkit-animation-timing-function":"ease","-webkit-animation-timing-function":o,"-webkit-animation-delay":d+"ms","-webkit-animation-fill-mode":"both"})})}var c,w,f,m,p,u,g,h,b,k,v,C,x={direction:"vertical",swipeAnim:"default",drag:!0,loading:!1,indicator:!1,arrow:!1,onchange:function(){},orientationchange:function(){}},z=!1,y=!0;a.fn.parallax=function(n){return x=a.extend({},a.fn.parallax.defaults,n),this.each(function(){k=a(this),v=k.find(".page"),i()})},a.fn.parallax.defaults={direction:"vertical",swipeAnim:"default",drag:!0,loading:!1,indicator:!1,arrow:!1,onchange:function(){},orientationchange:function(){}},a(document).on("touchstart",".page",function(a){n(a.changedTouches[0])}).on("touchmove",".page",function(a){t(a.changedTouches[0])}).on("touchend",".page",function(a){r(a.changedTouches[0])}).on("webkitAnimationEnd webkitTransitionEnd",".pages",function(){"stay"!==p&&(setTimeout(function(){a(".back").hide().removeClass("back"),a(".front").show().removeClass("front"),k.removeClass("forward backward animate")},10),a(v.removeClass("current").get(u)).addClass("current"),x.onchange(u,v[u],p),l())}),a(".page *").on("webkitAnimationEnd",function(){event.stopPropagation()}),a(window).on("load",function(){if(x.loading&&(a(".parallax-loading").remove(),y=!1,a(v[u]).addClass("current"),x.onchange(u,v[u],p),l()),x.indicator){y=!1;var i="horizontal"===x.direction?"parallax-h-indicator":"parallax-v-indicator";a(".wrapper").append("<div class="+i+"></div>");for(var n="<ul>",t=1;g>=t;t++)n+=1===t?'<li class="current"></li>':"<li></li>";n+="</ul>",a("."+i).append(n)}x.arrow&&(v.append('<span class="parallax-arrow"></span>'),a(v[g-1]).find(".parallax-arrow").remove())}),window.addEventListener("onorientationchange"in window?"orientationchange":"resize",function(){(180===window.orientation||0===window.orientation)&&x.orientationchange("portrait"),(90===window.orientation||-90===window.orientation)&&x.orientationchange("landscape")},!1)}(window.Zepto||window.jQuery);