!function(global){"use strict";var vars=global.VARS,Util={getAndroidVersionNumber:function(){var t=vars.UA.match(/android(.*?);/i)||[];return t[1]||"0"},getVersionNumber:function(t){var e=0;try{var r=t.replace(/_/g,".").replace(/^([0-9]+\.[0-9]+)[0-9\.]*/,"$1");e=parseFloat(r||0)}catch(n){}return e},timeFromNow:function(t){var e=t;try{var r=60,n=60*r,a=24*n,o=30*a,i=12*o;t=(+new Date-parseInt(t,10))/1e3,e=t>=i?Math.floor(t/i)+"年前":t>=o?Math.floor(t/o)+"个月前":t>=a?Math.floor(t/a)+"天前":t>=n?Math.floor(t/n)+"小时前":t>=r?Math.floor(t/r)+"分钟前":"刚刚"}catch(s){}return e},formatDateTime:function(t,e){var r="";try{t=t||new Date,e=e||new Date;var n=t.getMonth()+1,a=t.getDate(),o=e.getTime()-t.getTime(),i=Math.floor(o/864e5),s=o%864e5,c=Math.floor(s/36e5),u=s%36e5,l=Math.floor(u/6e4),f=u%6e4;Math.round(f/1e3);if(n.toString().length<2&&(n="0"+n),a.toString().length<2&&(a="0"+a),i>7)return t.getFullYear()+"-"+n+"-"+a;if(i>=2&&7>=i){var p=t.getDay()||1,h="星期一";switch(p){case 0:h="星期日";break;case 1:h="星期一";break;case 2:h="星期二";break;case 3:h="星期三";break;case 4:h="星期四";break;case 5:h="星期五";break;case 6:h="星期六"}r=h}else r=i>=1&&2>i?"昨天":24>c&&c>=1?c+"小时前":1>c&&l>=5?l+"分钟前":"刚刚";return r}catch(d){}},secondsToTime:function(t){var e=t;try{var r=parseInt(t,10);isNaN(r)&&(r=0);var n=Math.floor(r/60);if(t=r%60,10>t&&(t="0"+t),60>n)10>n&&(n="0"+n),e=n+":"+t;else{var a=Math.floor(n/60);n%=60,10>n&&(n="0"+n),10>a&&(a="0"+a),e=a+":"+n+":"+t}}catch(o){}return e},secondsToTimeText:function(t){var e=t;try{var r=parseInt(t,10);isNaN(r)&&(r=0);var n=Math.floor(r/60);if(t=r%60+"秒",60>n)e=(n>0?n+"分":"")+t;else{var a=Math.floor(n/60);n%=60,e=(a>0?a+"小时":"")+n+"分"+t}}catch(o){}return e},shortCount:function(t){var e=t;try{t=parseInt(t,10),t>1e8?t=Math.floor(t/1e8)+"亿":t>1e4&&(t=Math.floor(t/1e4)+"万"),e=t}catch(r){}return e},shortFixedCount:function(t){var e=t;try{t=parseFloat(t),t&&t>=1e8?t=(t/1e8).toFixed(1)+"亿":t&&t>=1e4&&(t=(t/1e4).toFixed(1)+"万"),e=t}catch(r){}return e},dateString:function(t){var e=t.match(/([0-9]{4}\-[0-9]+\-[0-9]+)/);return e&&(t=e[1]),t},compareVersion:function(t,e){var r=t.split("."),n=e.split(".");if(t===e)return 0;for(var a=0;a<r.length;a++){var o=parseInt(r[a]);if(!n[a])return 1;var i=parseInt(n[a]);if(i>o)return-1;if(o>i)return 1}return 1},getTouchPosition:function(t){return t=t.originalEvent||t,"touchstart"===t.type||"touchmove"===t.type||"touchend"===t.type?{x:t.targetTouches[0].pageX,y:t.targetTouches[0].pageY}:{x:t.pageX,y:t.pageY}},setLoad:function(t){return t=$(t),t.hasClass("_load_inited")||t.addClass("_load_inited").append($('<i class="ui_loading"><u></u><u></u><u></u></i>')),t},loadScript:function(t,e,r,n,a){n=n||"script",a=a||"";var o,i=document.getElementsByTagName("head")[0]||document.body;"css"==n?(o=document.createElement("link"),o.setAttribute("rel","stylesheet"),o.setAttribute("href",t)):(o=document.createElement("script"),o.src=t),a&&(o.charset=a||"utf-8");var s=!1;return o.onload=o.onreadystatechange=function(){s||this.readyState&&"loading"===this.readyState||(s=!0,e&&e.apply(null,r||[]),o.onload=o.onreadystatechange=null,"script"==n&&i.removeChild(o))},i.appendChild(o),o},formatURL:function(t){return t+="",t=t.replace(/^https?:\/\/(my\.|v\.)?tv\./i,"http://m.tv.").replace("http://s.","http://m.s.").replace("http://m.s.","http://m.tv.").replace(/^http:\/\/(video\.)?2012/i,"http://m.s")},makePlayUrl:function(t,e){var r="";return r=/^(t\.)*m\.tv\.sohu\.com/.test(location.host)?"http://"+location.host:"http://m.tv.sohu.com",t.vid&&(t.site=t.site||1,r+=1===t.site?"/v":"/u/vw/",r+=t.vid+".shtml",e&&(r+="?channeled="+e)),r},getPageOffset:function(){return window.pageYOffset||document.body&&document.body.scrollTop||0},getSohuDefaultApplink:function(t){if(t&&"string"==typeof t)return t;var e="http://m.tv.sohu.com/app";return vars.IsAndroid&&(e=vars.IsAndroidPad?"http://upgrade.m.tv.sohu.com/channels/hdv/5.0.0/SohuTVPad_5.0.0_1369_201507271523.apk":"http://upgrade.m.tv.sohu.com/channels/hdv/5.0.0/SohuTV_5.0.0_680_201506111914.apk"),vars.IsIphone&&(e="https://itunes.apple.com/cn/app/sou-hu-shi-pin-gao-qing/id458587755?mt=8"),vars.IsIpad&&(e="https://itunes.apple.com/cn/app/sou-hu-shi-pin-hd/id414430589?mt=8"),vars.IsWindowsPhone&&(e="http://www.windowsphone.com/zh-CN/apps/403faf93-d22c-4331-ac32-9560ee9fac94"),vars.IsWindowsPad&&(e="http://apps.microsoft.com/windows/zh-CN/app/c5ae3c2a-5573-45c2-ac63-7d67e01de6bb"),vars.IsWeixinBrowser&&!vars.IsIphone&&(e="http://a.app.qq.com/o/simple.jsp?pkgname=com.sohu.sohuvideo&g_f=991881"),e},getConnectionType:function(){var t,e=window.navigator.connection,r="";return e&&(t=e.type,t===e.CELL_2G?r="2g":t===e.CELL_3G?r="3g":t===e.WIFI&&(r="wifi")),r},formatDateWithBar:function(t){try{if(t=t||"",t&&"string"==typeof t){if(t&&t.indexOf("-")>-1)return t;t=t.indexOf("CST")>-1||t.indexOf("GMT")>-1?new Date(t):new Date(parseInt(t))}else t=t&&"number"==typeof t?new Date(parseInt(t)):t&&"object"==typeof t?t||new Date:new Date;var e=t.getMonth()+1,r=t.getDate();return e.toString().length<2&&(e="0"+e),r.toString().length<2&&(r="0"+r),t.getFullYear()+"-"+e+"-"+r}catch(n){console.log(n)}},formatDateWithZh:function(t){t=t||new Date;var e=t.getMonth()+1,r=t.getDate();return e.toString().length<2&&(e="0"+e),r.toString().length<2&&(r="0"+r),t.getFullYear()+"年"+e+"月"+r+"日"},formatDateStr:function(t,e){var r={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in r)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?r[n]:("00"+r[n]).substr((""+r[n]).length)));return e},getUserPt:function(){var t=1;if("undefined"!=typeof navigator.platform)for(var e=["Win32","Win64","Windows","Mac68K","MacPC","Macintosh","MacIntel"],r=0,n=e.length;n>r;r++)if(navigator.platform===e[r]){t=1;break}return vars.IsIpad&&(t=2),vars.IsIphone&&(t=3),vars.IsAndroid&&(t=5,/tv/i.test(vars.UA)&&(t=6)),vars.IsAndroidPad&&(t=4),vars.IsWindowsPad&&(t=7),vars.IsWindowsPhone&&(t=8),t},getUserPt2:function(){var t="pc";if("undefined"!=typeof navigator.platform)for(var e=["Win32","Win64","Windows","Mac68K","MacPC","Macintosh","MacIntel"],r=0,n=e.length;n>r;r++)if(navigator.platform===e[r]){t="pc";break}return vars.IsIpad&&(t="iPad"),vars.IsIphone&&(t="iPhone"),vars.IsAndroid&&(t="android"),vars.IsAndroidPad&&(t="androidPad"),vars.IsWindowsPad&&(t="windowsPad"),vars.IsWindowsPhone&&(t="windowsPhone"),t},getUserSysPt:function(){var t="pc";if("undefined"!=typeof navigator.platform)for(var e=["Win32","Win64","Windows","Mac68K","MacPC","Macintosh","MacIntel"],r=0,n=e.length;n>r;r++)if(navigator.platform===e[r]){t="pc";break}vars.IsAndroid&&(t="android"),vars.IsAndroidPad&&(t="android"),vars.IsIpad&&(t="ios"),vars.IsIphone&&(t="ios"),vars.IsWindowsPad&&(t="windows"),vars.IsWindowsPhone&&(t="windows")},reverse:function(t){return Array.isArray(t)?t.reverse():String(t).split("").reverse().join("")},getFnName:function(t){var e="";return"function"==typeof t&&(e=t.name||(/function ([^\(]+)/.exec(t.toString())||[])[1]||""),e},createUUIDPart:function(t){var e="";try{t="number"==typeof t&&t>0?t:16;for(var r=0;t>r;r++){var n=parseInt(256*Math.random(),10).toString(16);1===n.length&&(n="0"+n),e+=n}}catch(a){}return e},getRandomNum:function(t,e){var r=e-t,n=Math.random();return t+Math.round(n*r)},formatDateWithBar2:function(){var t=t||new Date,e=t.getMonth()+1,r=t.getDate();return e.toString().length<2&&(e="0"+e),r.toString().length<2&&(r="0"+r),t.getFullYear()+""+e+r},createUUID:function(){var t=Math.floor(window.screen.width),e=Math.floor(window.screen.height),r=Math.floor(Math.sqrt(t*t+e*e))||0,n=Math.round(this.getUserPt())||1,a=1e3*+new Date,o=a+n+r+Math.round(1e3*Math.random());return console.log("h5-uuid:",o),o},evalJSON:function(src){var obj={};try{/\\%/.test(src)&&(src=decodeURIComponent(src)),obj="object"==typeof JSON&&JSON.parse?eval("["+src+"]")[0]:eval("("+src+")")}catch(e){try{/\\%/.test(src)&&(src=decodeURIComponent(src)),obj=JSON.parse(src)}catch(b){console.log(b)}}return obj},each:function(t,e,r){if(null!=t)if(t.length===+t.length){for(var n=0,a=t.length;a>n;n++)if(e.call(r,t[n],n,t)===!1)return!1}else for(var o in t)if(t.hasOwnProperty(o)&&e.call(r,t[o],o,t)===!1)return!1},makeInstance:function(t){var e=new Function;return e.prototype=t,t=new e,e.prototype=null,t},extend:function(t,e,r){if(e)for(var n in e)r&&t.hasOwnProperty(n)||(t[n]=e[n]);return t},extend2:function(t){for(var e=arguments,r=1;r<e.length;r++){var n=e[r];for(var a in n)t.hasOwnProperty(a)||(t[a]=n[a])}return t},inherits:function(t,e){var r=t.prototype,n=Util.makeInstance(e.prototype);return Util.extend(n,r,!0),t.prototype=n,n.constructor=t},bind:function(t,e){return function(){return t.apply(e,arguments)}},defer:function(t,e,r){var n;return function(){r&&clearTimeout(n),n=setTimeout(t,e)}},indexOf:function(t,e,r){var n=-1;return r=this.isNumber(r)?r:0,this.each(t,function(t,a){return a>=r&&t===e?(n=a,!1):void 0}),n},getDataSet:function(t){var e={};try{if(t){"Array"==typeof t&&t.length>0&&(t=t[0]);var r=t.dataset||{},n=0;if(r&&r.vid){for(n in r){var a=n,o=r[a]||"";a=a.replace(/data-/,""),e[a]=o}return e}var i=t.attributes||{};e={};for(n in i){var s=i[n]||"",a=s.name,o=s.value||"";/data-/i.test(a)&&(a=a.replace(/data-/,""),e[a]=o)}}}catch(c){console.log(c)}return e},removeItem:function(t,e){for(var r=0,n=t.length;n>r;r++)t[r]===e&&(t.splice(r,1),r--)},trim:function(t){return t.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(t){if(!t)return{};t=Util.isArray(t)?t:t.split(",");for(var e,r=0,n={};e=t[r++];)n[e.toUpperCase()]=n[e]=1;return n},unhtml:function(t,e){try{return t?t.replace(e||/[&<">'](?:(amp|lt|quot|gt|#39|#10|#13);)?/g,function(t,e){return e?t:{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;","\n":"&#10;","\r":"&#13;"}[t]}):""}catch(r){return t}},html:function(t){try{return t?t.replace(/&((g|l|quo)t|amp|#39|#10|#13);/g,function(t){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">","&#39;":"'","&#10;":"<br>","&#13;":"<br>"}[t]}):""}catch(e){return t}},cssStyleToDomStyle:function(){var t=document.createElement("div").style,e={"float":void 0!=t.cssFloat?"cssFloat":void 0!=t.styleFloat?"styleFloat":"float"};return function(t){return e[t]||(e[t]=t.toLowerCase().replace(/-./g,function(t){return t.charAt(1).toUpperCase()}))}}(),loadFile:function(){function t(t,r){try{for(var n,a=0;n=e[a++];)if(n.doc===t&&n.url==(r.src||r.href))return n}catch(o){return null}}var e=[];return function(r,n,a){var o=t(r,n);if(o)return void(o.ready?a&&a():o.funs.push(a));if(e.push({doc:r,url:n.src||n.href,funs:[a]}),!r.body){var i=[];for(var s in n)"tag"!=s&&i.push(s+'="'+n[s]+'"');return void r.write("<"+n.tag+" "+i.join(" ")+" ></"+n.tag+">")}if(!n.id||!r.getElementById(n.id)){var c=r.createElement(n.tag);delete n.tag;for(var s in n)c.setAttribute(s,n[s]);c.onload=c.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){if(o=t(r,n),o.funs.length>0){o.ready=1;for(var e;e=o.funs.pop();)e()}c.onload=c.onreadystatechange=null}},c.onerror=function(){throw Error("The load "+(n.href||n.src)+" fails,check the url settings of file config.js ")},r.getElementsByTagName("head")[0].appendChild(c)}}}(),isEmptyObject:function(t){if(null==t)return!0;if(this.isArray(t)||this.isString(t))return 0===t.length;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},fixColor:function(t,e){if(/color/i.test(t)&&/rgba?/.test(e)){var r=e.split(",");if(r.length>3)return"";e="#";for(var n,a=0;n=r[a++];)n=parseInt(n.replace(/[^\d]/gi,""),10).toString(16),e+=1==n.length?"0"+n:n;e=e.toUpperCase()}return e},clone:function(t,e){var r;e=e||{};for(var n in t)t.hasOwnProperty(n)&&(r=t[n],"object"==typeof r?(e[n]=Util.isArray(r)?[]:{},Util.clone(t[n],e[n])):e[n]=r);return e},transUnitToPx:function(t){if(!/(pt|cm)/.test(t))return t;var e;switch(t.replace(/([\d.]+)(\w+)/,function(r,n,a){t=n,e=a}),e){case"cm":t=25*parseFloat(t);break;case"pt":t=Math.round(96*parseFloat(t)/72)}return t+(t?"px":"")},cssRule:function(t,e,r){r=r||document;var n,a=r.getElementsByTagName("head")[0];if(!(n=r.getElementById(t))){if(void 0===e)return"";n=r.createElement("style"),n.id=t,a.appendChild(n)}return void 0===e?n.innerHTML:void(""!==e?n.innerHTML=e:a.removeChild(n))}};Util.each(["String","Function","Array","Number","RegExp","Object"],function(t){Util["is"+t]=function(e){return Object.prototype.toString.apply(e)=="[object "+t+"]"}}),String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"gm"),e)},String.prototype.hasOwnProperty("trim")||(String.prototype.trim=function(){return this.replace(/^(\s|\r|\n|\r\n)*|(\s|\r|\n|\r\n)*$/g,"")}),Function.prototype.hasOwnProperty("bind")||(Function.prototype.bind=function(t){var e=this,r=arguments.length>1?Array.slice(arguments,1):null;return function(){return e.apply(t||this,r)}});var Events=function(){},addListener=Util.getListener=function(t,e,r){var n;return t=t||Util.Events||{},e=e&&e.toLowerCase()||"",(n=t.__allListeners||r&&(t.__allListeners={}))&&(n[e]||r&&(n[e]=[]))};Events.prototype={addListener:function(t,e){t=Util.trim(t).split(" ");for(var r,n=0;r=t[n++];)console.log(typeof this,this),addListener(this,r,!0).push(e)},removeListener:function(t,e){t=Util.trim(t).split(" ");for(var r,n=0;r=t[n++];)Util.removeItem(addListener(this,r)||[],e)},fireEvent:function(){var t=arguments[0];t=Util.trim(t).split(" ");for(var e,r=0;e=t[r++];){var n,a,o,i=addListener(this,e);if(i)for(o=i.length;o--;)if(i[o]){if(a=i[o].apply(this,arguments),a===!0)return a;void 0!==a&&(n=a)}(a=this["on"+e.toLowerCase()])&&(n=a.apply(this,arguments))}return n}},Util.Events=new Events,global.Util=Util,"function"==typeof define&&define("base/util",function(require,exports,module){module.exports=Util})}(window);