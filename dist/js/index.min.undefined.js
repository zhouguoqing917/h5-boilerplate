+function(t){"use strict";var i=function(i){this.params=i,this.tpl=t.t7(this.params.indexListTemplate).compile()};i.prototype.render=function(i){this.list=t(i||".list"),this.draw()},i.prototype.draw=function(){this.indexList&&this.indexList.remove(),this.titles=this.list.find(this.params.titleSelector);var i=this.titles.map(function(i,e){return t(e).data("index")||t(e).text()}).toArray();this.indexList=t("<ul class='index-list-bar'></ul>").appendTo(this.list.parents(".page")),this.indexList.html(this.tpl({indexes:i})),this.indexList.on(t.touchEvents.start,t.proxy(this.touchStart,this)),this.indexList.on(t.touchEvents.start+" "+t.touchEvents.move,t.proxy(this.touchMove,this)),this.indexList.on(t.touchEvents.end,t.proxy(this.touchEnd,this)),this.content=this.list.parents(".content")},i.prototype.touchStart=function(){this.pageOffsetTop=this.content.offset().top,this.touching=!0},i.prototype.touchMove=function(i){if(this.touching){i.preventDefault();var e=this.getElementOnTouch(t.getTouchPosition(i));if(e){var n=this.titles.eq(e.data("index")),s=n.parent().offset().top,o=s-this.pageOffsetTop+this.content.scrollTop();this.content.scrollTop(o)}}},i.prototype.touchEnd=function(){this.touching=!1},i.prototype.getElementOnTouch=function(i){var e=null;return this.indexList.find("li").each(function(){if(!e){var n=t(this),s=n.offset();s.top<i.y&&s.top+n.outerHeight()>i.y&&(e=n)}}),e},t.fn.indexList=function(e){return this.each(function(){if(this){var n=t(this),s=n.data("index");return s||(e=t.extend({},t.fn.indexList.prototype.defaults,e),s=new i(e).render(n),n.data("index",s)),s}})},t.fn.indexList.prototype.defaults={titleSelector:".list-group-title",indexListTemplate:"{{#indexes}}<li data-index={{@index}}><strong>{{this}}</strong></li>{{/indexes}}"},t.initIndexList=function(i){var e=t(i);e.hasClass(".contacts-block")?e.indexList():e.find(".contacts-block").indexList()}}($);