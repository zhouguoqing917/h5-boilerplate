+function(t){"use strict";function e(){d[w.id]=document.body.cloneNode(!0);var e=t(".content"),n=e[0].id;n&&(u[n]=e.scrollTop())}function n(e){var n=t(e),i=n[0].id;i&&"false"!==n.data("remember-scroll")&&n.scrollTop(u[i])}var i=function(){},o=function(){var e=t(".page")[0];return e||(e=document.body),e},r=function(){var t=document.createElement("ratchet"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return e[n];return e.transition}();window.CustomEvent||(window.CustomEvent=function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail,e.id),n});var a,s=20,c=sessionStorage,d={},u={},l={"slide-in":"slide-out","slide-out":"slide-in",fade:"fade"},f={bartab:".bar-tab",barnav:".bar-nav",barfooter:".bar-footer",barheadersecondary:".bar-header-secondary",barfootersecondary:".bar-footer-secondary"},h={popup:".popup",panel:".panel",panelOverlay:".panel-overlay"},m=function(t,e){w.id=t.id,e&&(t=g(t.id)),c[t.id]=JSON.stringify(t),window.history.replaceState(t.id,t.title,t.url)},p=function(){var t=w.id,e=JSON.parse(c.cacheForwardStack||"[]"),n=JSON.parse(c.cacheBackStack||"[]");for(n.push(t);e.length;)delete c[e.shift()];for(;n.length>s;)delete c[n.shift()];g(w.id).url&&window.history.pushState(null,"",g(w.id).url),c.cacheForwardStack=JSON.stringify(e),c.cacheBackStack=JSON.stringify(n)},v=function(t,e){var n="forward"===e,i=JSON.parse(c.cacheForwardStack||"[]"),o=JSON.parse(c.cacheBackStack||"[]"),r=n?o:i,a=n?i:o;w.id&&r.push(w.id),a.pop(),c.cacheForwardStack=JSON.stringify(i),c.cacheBackStack=JSON.stringify(o)},g=function(t){return JSON.parse(c[t]||null)||{}},y=function(t){var e=T(t.target);if(!(!e||t.which>1||t.metaKey||t.ctrlKey||a||location.protocol!==e.protocol||location.host!==e.host||!e.hash&&/#/.test(e.href)||e.hash&&e.href.replace(e.hash,"")===location.href.replace(location.hash,"")||"push"===e.getAttribute("data-ignore")))return e},S=function(t){var e,n,i,o,r,a,s,u,m=t.state;if(m&&c[m]){if(r=w.id<m?"forward":"back",v(m,r),i=g(m),o=d[m],i.title&&(document.title=i.title),"back"===r?(s=JSON.parse("back"===r?c.cacheForwardStack:c.cacheBackStack),u=g(s[s.length-1])):u=i,"back"===r&&!u.id)return w.id=m;if(a="back"===r?l[u.transition]:u.transition,!o)return w({id:i.id,url:i.url,title:i.title,timeout:i.timeout,transition:a,ignorePush:!0});i=O(i,".content",o.cloneNode(!0));for(e in f)f.hasOwnProperty(e)&&(n=document.querySelector(f[e]),i[e]?k(i[e],n):n&&n.parentNode.removeChild(n));var p=O(i,".content",o.cloneNode(!0));for(e in h)h.hasOwnProperty(e)&&p[e]&&E(p[e]);k((i.contents||o).cloneNode(!0),document.querySelector(".content"),a,void 0,!0),w.id=m,document.body.offsetHeight}},w=function(n){var o,r=w.xhr;n.container=n.container||n.transition?document.querySelector(".content"):document.body;var a=/^file:/.test(window.location.protocol);for(o in f)f.hasOwnProperty(o)&&(n[o]=n[o]||document.querySelector(f[o]));r&&r.readyState<4&&(r.onreadystatechange=i,r.abort(),N("pushCancel")),r=new XMLHttpRequest,a?r.open("GET",n.url,!1):(r.open("GET",n.url,!0),r.setRequestHeader("X-PUSH","true"),r.onreadystatechange=function(){n._timeout&&clearTimeout(n._timeout),4===r.readyState&&(200===r.status?b(r,n):L(n.url))}),w.id||m({id:+new Date,url:window.location.href,title:document.title,timeout:n.timeout,transition:n.transition}),e(),n.timeout&&(n._timeout=setTimeout(function(){r.abort("timeout"),N("pushCancel")},n.timeout)),r.send(),a&&(0===r.status||200===r.status?b(r,n):L(n.url)),r.readyState&&!n.ignorePush&&p(),N("pushStart"),t(document).trigger("pageLoadStart",{url:n.url})},b=function(t,e){var n,i,o=q(t,e);if(!o.contents)return C(e.url);o.title&&(document.title=o.title);var r=e.id||+new Date;for(n in f)f.hasOwnProperty(n)&&(i=document.querySelector(f[n]),o[n]?k(o[n],i):i&&i.parentNode.removeChild(i));for(n in h)h.hasOwnProperty(n)&&o[n]&&E(o[n]);k(o.contents,e.container,e.transition,function(){m({id:r,url:o.url,title:o.title,timeout:e.timeout,transition:e.transition},e.id)},!0),!e.ignorePush&&window._gaq&&_gaq.push(["_trackPageview"]),!e.hash},L=function(t){throw N("pushFail"),new Error("Could not get: "+t)},k=function(e,i,a,s,c){var d,u,l;N("pushAnimationStart");var f=o();a?(d=/in$/.test(a),"fade"===a&&(i.classList.add("in"),i.classList.add("fade"),e.classList.add("fade")),/slide/.test(a)&&(e.classList.add("sliding-in",d?"right":"left"),e.classList.add("sliding"),i.classList.add("sliding")),i.parentNode.insertBefore(e,i),n(e)):i?(i.innerHTML=e.innerHTML,i.className=e.className,i.id=e.id,n(i)):e.classList.contains("content")?(f.appendChild(e),n(e)):(t(e).insertBefore(document.querySelector(".content")),n(e)),c&&(a?t(e).trigger("pageAnimationStart",[e.id,e]):t(".content").trigger("pageAnimationStart",[e.id,e]));var h=function(){s&&s(),N("pushAnimationComplete"),c&&(N("push"),a?(t.initPage(t(e)),t(e).trigger("pageInit",[e.id,e])):(t.initPage(t(".content")),t(".content").trigger("pageInit",[e.id,e])))};if(a||h(),"fade"===a){i.offsetWidth,i.classList.remove("in");var m=function(){i.removeEventListener(r,m),e.classList.add("in"),t.os.android&&t.compareVersion("4.2.0",t.os.version)?setTimeout(p,t.smConfig.pushAnimationDuration):e.addEventListener(r,p)},p=function(){e.removeEventListener(r,p),i.parentNode.removeChild(i),e.classList.remove("fade"),e.classList.remove("in"),h()};t.os.android&&t.compareVersion("4.2.0",t.os.version)?setTimeout(m,t.smConfig.pushAnimationDuration):i.addEventListener(r,m)}if(/slide/.test(a)){var v=function(){e.removeEventListener(r,v),e.classList.remove("sliding","sliding-in"),e.classList.remove(l),i.parentNode.removeChild(i),h()};i.offsetWidth,l=d?"right":"left",u=d?"left":"right",i.classList.add(u),e.classList.remove(l),t.os.android&&t.compareVersion("4.2.0",t.os.version)?setTimeout(v,t.smConfig.pushAnimationDuration):e.addEventListener(r,v)}},E=function(e){t(e).appendTo(document.body)},N=function(t,e){t=t||"push";var n=new CustomEvent(t,{detail:{state:g(w.id)},bubbles:!0,id:e,cancelable:!0});window.dispatchEvent(n)},T=function(t){for(var e,n=document.querySelectorAll("a");t&&t!==document;t=t.parentNode)for(e=n.length;e--;)if(n[e]===t)return t},C=function(t){window.history.replaceState(null,"","#"),window.location.replace(t)},O=function(e,n,i){var o,r={};for(o in e)e.hasOwnProperty(o)&&(r[o]=e[o]);var a=t.extend({},f,h);return Object.keys(a).forEach(function(t){var e=i.querySelector(a[t]);e&&e.parentNode.removeChild(e),r[t]=e}),r.contents=i.querySelector(n),r},q=function(t,e){var n,i,o={},r=t.responseText;if(o.url=e.url,!r)return o;/<html/i.test(r)?(n=document.createElement("div"),i=document.createElement("div"),n.innerHTML=r.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0],i.innerHTML=r.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]):(n=i=document.createElement("div"),n.innerHTML=r),o.title=n.querySelector("title")||document.querySelector("title");var a="innerText"in o.title?"innerText":"textContent";return o.title=o.title&&o.title[a].trim(),e.transition?o=O(o,".content",i):o.contents=i,o};t.smConfig.pushjs&&(window.addEventListener("click",function(t){var e=y(t);e&&(t.preventDefault(),w({url:e.href,hash:e.hash,timeout:e.getAttribute("data-timeout"),transition:e.getAttribute("data-transition")}))}),window.addEventListener("popstate",S)),t(document).on("click",".back",function(){history.back()}),t.push=w}($);