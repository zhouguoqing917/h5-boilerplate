+function(e){"use strict";e.sortableToggle=function(t){return t=e(t),0===t.length&&(t=e(".list-block.sortable")),t.toggleClass("sortable-opened"),t.hasClass("sortable-opened")?t.trigger("open"):t.trigger("close"),t},e.sortableOpen=function(t){return t=e(t),0===t.length&&(t=e(".list-block.sortable")),t.addClass("sortable-opened"),t.trigger("open"),t},e.sortableClose=function(t){return t=e(t),0===t.length&&(t=e(".list-block.sortable")),t.removeClass("sortable-opened"),t.trigger("close"),t},e.initSortable=function(){function t(t){a=!1,r=!0,l="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,i=e(this).parent(),c=i.parent().find("li"),p=i.parents(".sortable"),t.preventDefault(),e.allowPanelOpen=e.allowSwipeout=!1}function o(t){if(r&&i){var o="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY;a||(i.addClass("sorting"),p.addClass("sortable-sorting"),f=i[0].offsetTop,d=i.parent().height()-i[0].offsetTop-i.height(),u=i[0].offsetHeight),a=!0,t.preventDefault(),t.f7PreventPanelSwipe=!0,n=o-l;var s=n;-f>s&&(s=-f),s>d&&(s=d),i.transform("translate3d(0,"+s+"px,0)"),b=g=void 0,c.each(function(){var t=e(this);if(t[0]!==i[0]){var o=t[0].offsetTop,r=t.height(),a=i[0].offsetTop+s;a>=o-r/2&&i.index()<t.index()?(t.transform("translate3d(0, "+-u+"px,0)"),g=t,b=void 0):o+r/2>=a&&i.index()>t.index()?(t.transform("translate3d(0, "+u+"px,0)"),g=void 0,b||(b=t)):e(this).transform("translate3d(0, 0%,0)")}})}}function s(t){if(e.allowPanelOpen=e.allowSwipeout=!0,!r||!a)return r=!1,void(a=!1);t.preventDefault(),c.transform(""),i.removeClass("sorting"),p.removeClass("sortable-sorting");var o,s,l;g&&(i.insertAfter(g),i.trigger("sort")),b&&(i.insertBefore(b),i.trigger("sort")),(g||b)&&p.hasClass("virtual-list")&&(o=p[0].f7VirtualList,s=i[0].f7VirtualListIndex,l=b?b[0].f7VirtualListIndex:g[0].f7VirtualListIndex,o&&o.moveItem(s,l)),g=b=void 0,r=!1,a=!1}var r,a,l,n,i,u,c,f,d,g,b,p;e(document).on(e.touchEvents.start,".list-block.sortable .sortable-handler",t),e.support.touch?(e(document).on(e.touchEvents.move,".list-block.sortable .sortable-handler",o),e(document).on(e.touchEvents.end,".list-block.sortable .sortable-handler",s)):(e(document).on(e.touchEvents.move,o),e(document).on(e.touchEvents.end,s))},e(document).on("click",".toggle-sortable, .open-sortable, .close-sortable",function(t){t.preventDefault();var o=e(this),s=o.dataset();o.hasClass("toggle-sortable")&&e.sortableToggle(s.sortable),o.hasClass("open-sortable")&&e.sortableOpen(s.sortable),o.hasClass("close-sortable")&&e.sortableClose(s.sortable)})}($);