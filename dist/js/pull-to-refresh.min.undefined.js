+function(e){"use strict";e.initPullToRefresh=function(t){function n(t){if(l){if(!e.os.android)return;if("targetTouches"in t&&t.targetTouches.length>1)return}a=!1,l=!0,f=void 0,g=void 0;var n=e.getTouchPosition(t);T.x=n.x,T.y=n.y,h=(new Date).getTime(),d=e(this)}function o(t){if(l){var n=e.getTouchPosition(t),o=n.x,s=n.y;if("undefined"==typeof f&&(f=!!(f||Math.abs(s-T.y)>Math.abs(o-T.x))),!f)return void(l=!1);if(c=d[0].scrollTop,"undefined"==typeof g&&0!==c&&(g=!0),!a){if(d.removeClass("transitioning"),c>d[0].offsetHeight)return void(l=!1);C&&(v=d.attr("data-ptr-distance"),v.indexOf("%")>=0&&(v=d[0].offsetHeight*parseInt(v,10)/100)),R=d.hasClass("refreshing")?v:0,y=d[0].scrollHeight!==d[0].offsetHeight&&e.os.ios?!1:!0,y=!0}return a=!0,u=s-T.y,u>0&&0>=c||0>c?(e.os.ios&&parseInt(e.os.version.split(".")[0],10)>7&&0===c&&!g&&(y=!0),y&&(t.preventDefault(),p=Math.pow(u,.85)+R,d.transform("translate3d(0,"+p+"px,0)")),y&&Math.pow(u,.85)>v||!y&&u>=2*v?(m=!0,d.addClass("pull-up").removeClass("pull-down")):(m=!1,d.removeClass("pull-up").addClass("pull-down")),void 0):(d.removeClass("pull-up pull-down"),void(m=!1))}}function s(){return l&&a?(p&&(d.addClass("transitioning"),p=0),d.transform(""),m?(d.addClass("refreshing"),d.trigger("refresh",{done:function(){e.pullToRefreshDone(d)}})):d.removeClass("pull-down"),l=!1,void(a=!1)):(l=!1,void(a=!1))}function r(){i.off(e.touchEvents.start,n),i.off(e.touchEvents.move,o),i.off(e.touchEvents.end,s)}var i=e(t);if(i.hasClass("pull-to-refresh-content")||(i=i.find(".pull-to-refresh-content")),i&&0!==i.length){var l,a,f,u,h,d,p,c,g,v,C,T={},m=!1,y=!1,R=0;d=i,d.attr("data-ptr-distance")?C=!0:v=44,i.on(e.touchEvents.start,n),i.on(e.touchEvents.move,o),i.on(e.touchEvents.end,s),i[0].destroyPullToRefresh=r}},e.pullToRefreshDone=function(t){t=e(t),0===t.length&&(t=e(".pull-to-refresh-content.refreshing")),t.removeClass("refreshing").addClass("transitioning"),t.transitionEnd(function(){t.removeClass("transitioning pull-up pull-down")})},e.pullToRefreshTrigger=function(t){t=e(t),0===t.length&&(t=e(".pull-to-refresh-content")),t.hasClass("refreshing")||(t.addClass("transitioning refreshing"),t.trigger("refresh",{done:function(){e.pullToRefreshDone(t)}}))},e.destroyPullToRefresh=function(t){t=e(t);var n=t.hasClass("pull-to-refresh-content")?t:t.find(".pull-to-refresh-content");0!==n.length&&n[0].destroyPullToRefresh&&n[0].destroyPullToRefresh()}}($);