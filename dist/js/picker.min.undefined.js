+function(e){"use strict";var a=function(a){function t(){var a=!1;return p.params.convertToPopover||p.params.onlyInPopover?(!p.inline&&p.params.input&&(p.params.onlyInPopover?a=!0:e.device.ios?a=e.device.ipad?!0:!1:e(window).width()>=768&&(a=!0)),a):a}function n(){return p.opened&&p.container&&p.container.length>0&&p.container.parents(".popover").length>0?!0:!1}function i(){if(p.opened)for(var e=0;e<p.cols.length;e++)p.cols[e].divider||(p.cols[e].calcSize(),p.cols[e].setValue(p.cols[e].value,0,!1))}function r(e){if(e.preventDefault(),!p.opened&&(p.open(),p.params.scrollToInput&&!t())){var a=p.input.parents(".content");if(0===a.length)return;var n,i=parseInt(a.css("padding-top"),10),r=parseInt(a.css("padding-bottom"),10),o=a[0].offsetHeight-i-p.container.height(),s=a[0].scrollHeight-i-p.container.height(),c=p.input.offset().top-i+p.input[0].offsetHeight;if(c>o){var l=a.scrollTop()+c-o;l+o>s&&(n=l+o-s+r,o===s&&(n=p.container.height()),a.css({"padding-bottom":n+"px"})),a.scrollTop(l,300)}}}function o(a){n()||(p.input&&p.input.length>0?a.target!==p.input[0]&&0===e(a.target).parents(".picker-modal").length&&p.close():0===e(a.target).parents(".picker-modal").length&&p.close())}function s(){p.opened=!1,p.input&&p.input.length>0&&p.input.parents(".page-content").css({"padding-bottom":""}),p.params.onClose&&p.params.onClose(p),p.container.find(".picker-items-col").each(function(){p.destroyPickerCol(this)})}var p=this,c={updateValuesOnMomentum:!1,updateValuesOnTouchmove:!0,rotateEffect:!1,momentumRatio:7,freeMode:!1,scrollToInput:!0,inputReadOnly:!0,convertToPopover:!0,onlyInPopover:!1,toolbar:!0,toolbarCloseText:"OK",toolbarTemplate:'<header class="bar bar-nav">          <button class="button button-link pull-right close-picker">OK</button>          <h1 class="title"></h1>          </header>'};a=a||{};for(var l in c)"undefined"==typeof a[l]&&(a[l]=c[l]);p.params=a,p.cols=[],p.initialized=!1,p.inline=p.params.container?!0:!1;var u=e.device.ios||navigator.userAgent.toLowerCase().indexOf("safari")>=0&&navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!e.device.android;return p.setValue=function(e,a){for(var t=0,n=0;n<p.cols.length;n++)p.cols[n]&&!p.cols[n].divider&&(p.cols[n].setValue(e[t],a),t++)},p.updateValue=function(){for(var a=[],t=[],n=0;n<p.cols.length;n++)p.cols[n].divider||(a.push(p.cols[n].value),t.push(p.cols[n].displayValue));a.indexOf(void 0)>=0||(p.value=a,p.displayValue=t,p.params.onChange&&p.params.onChange(p,p.value,p.displayValue),p.input&&p.input.length>0&&(e(p.input).val(p.params.formatValue?p.params.formatValue(p,p.value,p.displayValue):p.value.join(" ")),e(p.input).trigger("change")))},p.initPickerCol=function(a,t){function n(){k=e.requestAnimationFrame(function(){d.updateItems(void 0,void 0,0),n()})}function i(a){if(!y&&!w){a.preventDefault(),w=!0;var t=e.getTouchPosition(a);x=T=t.y,M=(new Date).getTime(),P=!0,C=I=e.getTranslate(d.wrapper[0],"y")}}function r(a){if(w){a.preventDefault(),P=!1;var t=e.getTouchPosition(a);T=t.y,y||(e.cancelAnimationFrame(k),y=!0,C=I=e.getTranslate(d.wrapper[0],"y"),d.wrapper.transition(0)),a.preventDefault();var n=T-x;I=C+n,b=void 0,h>I&&(I=h-Math.pow(h-I,.8),b="min"),I>g&&(I=g+Math.pow(I-g,.8),b="max"),d.wrapper.transform("translate3d(0,"+I+"px,0)"),d.updateItems(void 0,I,0,p.params.updateValuesOnTouchmove),O=I-E||I,H=(new Date).getTime(),E=I}}function o(a){if(!w||!y)return void(w=y=!1);w=y=!1,d.wrapper.transition(""),b&&("min"===b?d.wrapper.transform("translate3d(0,"+h+"px,0)"):d.wrapper.transform("translate3d(0,"+g+"px,0)")),V=(new Date).getTime();var t,i;V-M>300?i=I:(t=Math.abs(O/(V-H)),i=I+O*p.params.momentumRatio),i=Math.max(Math.min(i,g),h);var r=-Math.floor((i-g)/v);p.params.freeMode||(i=-r*v+g),d.wrapper.transform("translate3d(0,"+parseInt(i,10)+"px,0)"),d.updateItems(r,i,"",!0),p.params.updateValuesOnMomentum&&(n(),d.wrapper.transitionEnd(function(){e.cancelAnimationFrame(k)})),setTimeout(function(){P=!0},100)}function s(a){if(P){e.cancelAnimationFrame(k);var t=e(this).attr("data-picker-value");d.setValue(t)}}var c=e(a),l=c.index(),d=p.cols[l];if(!d.divider){d.container=c,d.wrapper=d.container.find(".picker-items-col-wrapper"),d.items=d.wrapper.find(".picker-item");var m,v,f,h,g;d.replaceValues=function(e,a){d.destroyEvents(),d.values=e,d.displayValues=a;var t=p.columnHTML(d,!0);d.wrapper.html(t),d.items=d.wrapper.find(".picker-item"),d.calcSize(),d.setValue(d.values[0],0,!0),d.initEvents()},d.calcSize=function(){p.params.rotateEffect&&(d.container.removeClass("picker-items-col-absolute"),d.width||d.container.css({width:""}));var a,t;a=0,t=d.container[0].offsetHeight,m=d.wrapper[0].offsetHeight,v=d.items[0].offsetHeight,f=v*d.items.length,h=t/2-f+v/2,g=t/2-v/2,d.width&&(a=d.width,parseInt(a,10)===a&&(a+="px"),d.container.css({width:a})),p.params.rotateEffect&&(d.width||(d.items.each(function(){var t=e(this);t.css({width:"auto"}),a=Math.max(a,t[0].offsetWidth),t.css({width:""})}),d.container.css({width:a+2+"px"})),d.container.addClass("picker-items-col-absolute"))},d.calcSize(),d.wrapper.transform("translate3d(0,"+g+"px,0)").transition(0);var k;d.setValue=function(a,t,i){"undefined"==typeof t&&(t="");var r=d.wrapper.find('.picker-item[data-picker-value="'+a+'"]').index();if("undefined"!=typeof r&&-1!==r){var o=-r*v+g;d.wrapper.transition(t),d.wrapper.transform("translate3d(0,"+o+"px,0)"),p.params.updateValuesOnMomentum&&d.activeIndex&&d.activeIndex!==r&&(e.cancelAnimationFrame(k),d.wrapper.transitionEnd(function(){e.cancelAnimationFrame(k)}),n()),d.updateItems(r,o,t,i)}},d.updateItems=function(a,t,n,i){"undefined"==typeof t&&(t=e.getTranslate(d.wrapper[0],"y")),"undefined"==typeof a&&(a=-Math.round((t-g)/v)),0>a&&(a=0),a>=d.items.length&&(a=d.items.length-1);var r=d.activeIndex;d.activeIndex=a,d.wrapper.find(".picker-selected").removeClass("picker-selected"),p.params.rotateEffect&&d.items.transition(n);var o=d.items.eq(a).addClass("picker-selected").transform("");if((i||"undefined"==typeof i)&&(d.value=o.attr("data-picker-value"),d.displayValue=d.displayValues?d.displayValues[a]:d.value,r!==a&&(d.onChange&&d.onChange(p,d.value,d.displayValue),p.updateValue())),p.params.rotateEffect){(t-(Math.floor((t-g)/v)*v+g))/v;d.items.each(function(){var a=e(this),n=a.index()*v,i=g-t,r=n-i,o=r/v,s=Math.ceil(d.height/v/2)+1,p=-18*o;p>180&&(p=180),-180>p&&(p=-180),Math.abs(o)>s?a.addClass("picker-item-far"):a.removeClass("picker-item-far"),a.transform("translate3d(0, "+(-t+g)+"px, "+(u?-110:0)+"px) rotateX("+p+"deg)")})}},t&&d.updateItems(0,g,0);var w,y,x,T,M,V,C,b,I,E,O,H,P=!0;d.initEvents=function(a){var t=a?"off":"on";d.container[t](e.touchEvents.start,i),d.container[t](e.touchEvents.move,r),d.container[t](e.touchEvents.end,o),d.items[t]("click",s)},d.destroyEvents=function(){d.initEvents(!0)},d.container[0].f7DestroyPickerCol=function(){d.destroyEvents()},d.initEvents()}},p.destroyPickerCol=function(a){a=e(a),"f7DestroyPickerCol"in a[0]&&a[0].f7DestroyPickerCol()},e(window).on("resize",i),p.columnHTML=function(e,a){var t="",n="";if(e.divider)n+='<div class="picker-items-col picker-items-col-divider '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'">'+e.content+"</div>";else{for(var i=0;i<e.values.length;i++)t+='<div class="picker-item" data-picker-value="'+e.values[i]+'">'+(e.displayValues?e.displayValues[i]:e.values[i])+"</div>";n+='<div class="picker-items-col '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'"><div class="picker-items-col-wrapper">'+t+"</div></div>"}return a?t:n},p.layout=function(){var e,a="",t="";p.cols=[];var n="";for(e=0;e<p.params.cols.length;e++){var i=p.params.cols[e];n+=p.columnHTML(p.params.cols[e]),p.cols.push(i)}t="picker-modal picker-columns "+(p.params.cssClass||"")+(p.params.rotateEffect?" picker-3d":""),a='<div class="'+t+'">'+(p.params.toolbar?p.params.toolbarTemplate.replace(/{{closeText}}/g,p.params.toolbarCloseText):"")+'<div class="picker-modal-inner picker-items">'+n+'<div class="picker-center-highlight"></div></div></div>',p.pickerHTML=a},p.params.input&&(p.input=e(p.params.input),p.input.length>0&&(p.params.inputReadOnly&&p.input.prop("readOnly",!0),p.inline||p.input.on("click",r),p.params.inputReadOnly&&p.input.on("focus mousedown",function(e){e.preventDefault()}))),p.inline||e("html").on("click",o),p.opened=!1,p.open=function(){var a=t();p.opened||(p.layout(),a?(p.pickerHTML='<div class="popover popover-picker-columns"><div class="popover-inner">'+p.pickerHTML+"</div></div>",p.popover=e.popover(p.pickerHTML,p.params.input,!0),p.container=e(p.popover).find(".picker-modal"),e(p.popover).on("close",function(){s()})):p.inline?(p.container=e(p.pickerHTML),p.container.addClass("picker-modal-inline"),e(p.params.container).append(p.container)):(p.container=e(e.pickerModal(p.pickerHTML)),e(p.container).on("close",function(){s()})),p.container[0].f7Picker=p,p.container.find(".picker-items-col").each(function(){var e=!0;(!p.initialized&&p.params.value||p.initialized&&p.value)&&(e=!1),p.initPickerCol(this,e)}),p.initialized?p.value&&p.setValue(p.value,0):p.params.value&&p.setValue(p.params.value,0)),p.opened=!0,p.initialized=!0,p.params.onOpen&&p.params.onOpen(p)},p.close=function(){return p.opened&&!p.inline?n()?void e.closeModal(p.popover):void e.closeModal(p.container):void 0},p.destroy=function(){p.close(),p.params.input&&p.input.length>0&&p.input.off("click focus",r),e("html").off("click",o),e(window).off("resize",i)},p.inline&&p.open(),p};e(document).on("click",".close-picker",function(){var a=e(".picker-modal.modal-in");a.length>0?e.closeModal(a):(a=e(".popover.modal-in .picker-modal"),a.length>0&&e.closeModal(a.parents(".popover")))}),e.fn.picker=function(t){var n=arguments;return this.each(function(){if(this){var i=e(this),r=i.data("picker");if(!r){t=t||{};var o=i.val();void 0===t.value&&""!==o&&(t.value=t.cols.length>1?o.split(" "):[o]);var s=e.extend({input:this},t);r=new a(s),i.data("picker",r)}"string"==typeof t&&r[t].apply(r,Array.prototype.slice.call(n,1))}})}}($);